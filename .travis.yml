language: node_js
node_js:
  - "6"
  - "8"
  - "10"
  - "12"
cache:
  apt: true
  directories:
    - $HOME/.redis
install:
  - sudo apt-get install -y gcc
  - curl -o $HOME/.redis/redis-stable http://download.redis.io/redis-stable.tar.gz
  - pushd $HOME/.redis
  - tar xvzf redis-stable.tar.gz
  - cd redis-stable
  - make -j4
  - src/redis-server --port 6379 --daemonize yes
  - cd utils/create-cluster
  - ./create-cluster start
  - echo yes | ./create-cluster create
  - popd
